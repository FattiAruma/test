<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover, maximum-scale=1.0, user-scalable=no">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="apple-touch-icon" href="https://i.postimg.cc/3JMM1ZsM/wu-biao-ti103-20260210201345.png">
    <title>FT Phone</title>

    <link rel="stylesheet" href="style.css">
    <!-- ÂºïÂÖ• Vue -->
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <!-- ÂºïÂÖ• localforage (Áî®‰∫éÂ§ßÂÆπÈáèÂ≠òÂÇ®) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/localforage/1.10.0/localforage.min.js"></script>
</head>
<body>
    <div id="loading-screen">
        <div class="loading-text">Ê≠£Âú®Âä†ËΩΩ‰∏≠...</div>
    </div>
    <div id="app">
        <!-- Â£ÅÁ∫∏ -->
        <div id="wallpaper-layer" :style="{ backgroundImage: 'url(' + wallpaper + ')' }"></div>

        <!-- Ê°åÈù¢Â∏ÉÂ±Ä -->
        <div class="screens-wrapper">
            <div class="screens-container" :style="screensContainerStyle">
                <div class="screen">
                    <!-- Ê°åÈù¢È°∂ÈÉ® -->
                    <div class="widget-area">
                        <div class="avatar" :class="avatar.frame" :style="avatar.img ? { backgroundImage: 'url(' + avatar.img + ')' } : {}" @click="activeModal = 'image'; uploadTargetType = 'avatar'">
                            <span v-if="!avatar.img">FT</span>
                        </div>
                        <div class="user-name" :style="{ color: colors.header }" @click="openSingleEdit('name', 'ÂêçÂ≠ó')">{{ profile.name }}</div>
                        <div class="user-bio" :style="{ color: colors.header }" @click="openSingleEdit('bio1', 'Á¨¨‰∏ÄË°åÁÆÄ‰ªã')">{{ profile.bio1 }}</div>
                        <div class="user-bio" style="margin-top: 2px;" :style="{ color: colors.header }" @click="openSingleEdit('bio2', 'Á¨¨‰∫åË°åÁÆÄ‰ªã')">{{ profile.bio2 }}</div>
                    </div>
                    <div class="layout-container">
                        <div class="photo-widget photo-1" :style="{ backgroundImage: 'url(' + photos[0] + ')' }" @click="activeModal = 'image'; uploadTargetType = 'photo'; uploadTargetIndex = 0"></div>
                        
                        <div class="app-item" v-for="(app, key) in desktopApps" :key="key" @click="handleAppClick(key)">
                            <div class="app-icon" :style="[app.img ? { backgroundImage: 'url(' + app.img + ')' } : {}, { color: colors.app }]"><span v-if="!app.img">{{ app.icon }}</span></div>
                            <span class="app-name" :style="{ color: colors.app }">{{ app.name }}</span>
                        </div>
            
                        <div class="glass-box text-widget" @click="openTextEdit(0)" :style="{ alignItems: getFlexAlign(textWidgets[0].align), textAlign: textWidgets[0].align }">
                            <div class="text-title" :style="{ color: colors.widget }">{{ textWidgets[0].title }}</div>
                            <div class="text-desc" :style="{ color: colors.widget }">{{ textWidgets[0].desc }}</div>
                        </div>
                        
                        <div class="photo-widget photo-2" style="grid-row: 3 / span 2; grid-column: 3 / span 2;" :style="{ backgroundImage: 'url(' + photos[1] + ')' }" @click="activeModal = 'image'; uploadTargetType = 'photo'; uploadTargetIndex = 1"></div>
                        
                        <div class="glass-box text-widget" @click="openTextEdit(1)" :style="{ alignItems: getFlexAlign(textWidgets[1].align), textAlign: textWidgets[1].align }">
                            <div class="text-title" :style="{ color: colors.widget }">{{ textWidgets[1].title }}</div>
                            <div class="text-desc" :style="{ color: colors.widget }">{{ textWidgets[1].desc }}</div>
                        </div>
                    </div>
                </div>
                <div class="screen">
                    <div class="layout-container">
                        <!-- Á¨¨‰∫åÈ°µÂÜÖÂÆπ -->
                        <div class="glass-box days-matter-widget" style="grid-column: 1 / span 2; grid-row: 1 / span 2;">
                            <div class="days-avatars">
                                <div class="days-avatar" :style="daysMatter.leftAvatar ? { backgroundImage: 'url(' + daysMatter.leftAvatar + ')' } : {}" @click="activeModal = 'image'; uploadTargetType = 'days-left'">
                                    <span v-if="!daysMatter.leftAvatar">?</span>
                                </div>
                                <div class="days-avatar" :style="daysMatter.rightAvatar ? { backgroundImage: 'url(' + daysMatter.rightAvatar + ')' } : {}" @click="activeModal = 'image'; uploadTargetType = 'days-right'">
                                    <span v-if="!daysMatter.rightAvatar">?</span>
                                </div>
                            </div>
                            <div class="days-content" @click="openDaysEdit">
                                <div class="days-title-box">{{ daysMatter.title }}</div>
                                <div class="days-count-box">
                                    <span class="days-num">{{ daysCount }}</span>
                                    <span class="days-unit">Days</span>
                                </div>
                            </div>
                        </div>

                        <div class="app-item" style="grid-column: 3; grid-row: 1;" @click="handleAppClick('taobao')">
                            <div class="app-icon" :style="[desktopAppsPage2.taobao.img ? { backgroundImage: 'url(' + desktopAppsPage2.taobao.img + ')' } : {}, { color: colors.app }]"><span v-if="!desktopAppsPage2.taobao.img">{{ desktopAppsPage2.taobao.icon }}</span></div>
                            <span class="app-name" :style="{ color: colors.app }">{{ desktopAppsPage2.taobao.name }}</span>
                        </div>
                        <div class="app-item" style="grid-column: 4; grid-row: 1;" @click="handleAppClick('bilibili')">
                            <div class="app-icon" :style="[desktopAppsPage2.bilibili.img ? { backgroundImage: 'url(' + desktopAppsPage2.bilibili.img + ')' } : {}, { color: colors.app }]"><span v-if="!desktopAppsPage2.bilibili.img">{{ desktopAppsPage2.bilibili.icon }}</span></div>
                            <span class="app-name" :style="{ color: colors.app }">{{ desktopAppsPage2.bilibili.name }}</span>
                        </div>
                        <div class="app-item" style="grid-column: 3; grid-row: 2;" @click="handleAppClick('ins')">
                            <div class="app-icon" :style="[desktopAppsPage2.ins.img ? { backgroundImage: 'url(' + desktopAppsPage2.ins.img + ')' } : {}, { color: colors.app }]"><span v-if="!desktopAppsPage2.ins.img">{{ desktopAppsPage2.ins.icon }}</span></div>
                            <span class="app-name" :style="{ color: colors.app }">{{ desktopAppsPage2.ins.name }}</span>
                        </div>
                        <div class="app-item" style="grid-column: 4; grid-row: 2;" @click="handleAppClick('musicgame')">
                            <div class="app-icon" :style="[desktopAppsPage2.musicgame.img ? { backgroundImage: 'url(' + desktopAppsPage2.musicgame.img + ')' } : {}, { color: colors.app }]"><span v-if="!desktopAppsPage2.musicgame.img">{{ desktopAppsPage2.musicgame.icon }}</span></div>
                            <span class="app-name" :style="{ color: colors.app }">{{ desktopAppsPage2.musicgame.name }}</span>
                        </div>

                        <div class="glass-box music-widget" style="grid-column: 1 / span 4; grid-row: 3 / span 2; min-height: 167px; margin: 12px 0; padding: 10px; display: flex; flex-direction: column; gap: 8px;">
                            <!-- ‰º™ÊêúÁ¥¢Ê†è -->
                            <div class="music-search-bar">
                                <div class="music-search-avatar" :style="{ backgroundImage: 'url(' + musicWidget.avatar + ')' }" @click="handleLinkUpload('music-avatar')"></div>
                                <input type="text" class="music-search-input" placeholder="Love is the best magic..">
                                <svg xmlns="http://www.w3.org/2000/svg" class="music-search-icon" viewBox="0 0 24 24" fill="currentColor" width="18" height="18"><path d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/></svg>
                            </div>
                            <!-- ÂÜÖÂÆπÂå∫ -->
                            <div class="music-content-area">
                                <!-- Â∑¶‰æßÂ§ßÂõæ -->
                                <div class="music-main-photo" :style="{ backgroundImage: 'url(' + musicWidget.mainPhoto + ')' }" @click="handleLinkUpload('music-main')"></div>
                                <!-- Âè≥‰æßÂå∫Âüü -->
                                <div class="music-side-panel">
                                    <div class="music-side-photo" :style="{ backgroundImage: 'url(' + musicWidget.sidePhoto + ')' }" @click="handleLinkUpload('music-side')"></div>
                                    <div class="music-player-bar">
                                        <div class="music-player-progress-bg">
                                            <div class="music-player-progress-fg"></div>
                                            <div class="music-player-handle"></div>
                                        </div>
                                        <div class="music-player-time">
                                            <span>1:00</span>
                                            <span>5:20</span>
                                        </div>
                                        <div class="music-player-controls">
                                            <svg viewBox="0 0 24 24" width="18" height="18"><path d="M16 6h2v12h-2zm-6.5 6l6.5 5.5v-11z" fill="currentColor"></path></svg>
                                            <svg viewBox="0 0 24 24" width="20" height="20"><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z" fill="currentColor"></path></svg>
                                            <svg viewBox="0 0 24 24" width="18" height="18"><path d="M6 6h2v12H6zm9.5 6l-6.5-5.5v11z" fill="currentColor"></path></svg>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="app-item" style="grid-column: 1; grid-row: 5;" @click="handleAppClick('mailbox')">
                            <div class="app-icon" :style="[desktopAppsPage2.mailbox.img ? { backgroundImage: 'url(' + desktopAppsPage2.mailbox.img + ')' } : {}, { color: colors.app }]"><span v-if="!desktopAppsPage2.mailbox.img">{{ desktopAppsPage2.mailbox.icon }}</span></div>
                            <span class="app-name" :style="{ color: colors.app }">{{ desktopAppsPage2.mailbox.name }}</span>
                        </div>
                        <div class="app-item" style="grid-column: 2; grid-row: 5;" @click="handleAppClick('discord')">
                            <div class="app-icon" :style="[desktopAppsPage2.discord.img ? { backgroundImage: 'url(' + desktopAppsPage2.discord.img + ')' } : {}, { color: colors.app }]"><span v-if="!desktopAppsPage2.discord.img">{{ desktopAppsPage2.discord.icon }}</span></div>
                            <span class="app-name" :style="{ color: colors.app }">{{ desktopAppsPage2.discord.name }}</span>
                        </div>
                        <div class="app-item" style="grid-column: 1; grid-row: 6;" @click="handleAppClick('live')">
                            <div class="app-icon" :style="[desktopAppsPage2.live.img ? { backgroundImage: 'url(' + desktopAppsPage2.live.img + ')' } : {}, { color: colors.app }]"><span v-if="!desktopAppsPage2.live.img">{{ desktopAppsPage2.live.icon }}</span></div>
                            <span class="app-name" :style="{ color: colors.app }">{{ desktopAppsPage2.live.name }}</span>
                        </div>
                        <div class="app-item" style="grid-column: 2; grid-row: 6;" @click="handleAppClick('novel')">
                            <div class="app-icon" :style="[desktopAppsPage2.novel.img ? { backgroundImage: 'url(' + desktopAppsPage2.novel.img + ')' } : {}, { color: colors.app }]"><span v-if="!desktopAppsPage2.novel.img">{{ desktopAppsPage2.novel.icon }}</span></div>
                            <span class="app-name" :style="{ color: colors.app }">{{ desktopAppsPage2.novel.name }}</span>
                        </div>

                        <div class="glass-box" style="grid-column: 3 / span 2; grid-row: 5 / span 2;"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- È°µÈù¢ÊåáÁ§∫Âô® -->
        <div class="pagination-dots">
            <span class="dot" :class="{ active: currentPage === 0 }" @click="currentPage = 0"></span>
            <span class="dot" :class="{ active: currentPage === 1 }" @click="currentPage = 1"></span>
        </div>

        <!-- Â∫ïÈÉ® Dock -->
        <div class="dock-wrapper">
            <div class="dock">
                <div class="app-item" v-for="(app, key) in dockApps" :key="key" @click="handleAppClick(key)">
                    <div class="app-icon" :style="[app.img ? { backgroundImage: 'url(' + app.img + ')' } : {}, { color: colors.app }]"><span v-if="!app.img">{{ app.icon }}</span></div>
                    <span class="app-name" :style="{ color: colors.app }">{{ app.name }}</span>
                </div>
            </div>
        </div>

        <!-- === Â≠êÂ∫îÁî®ÁªÑ‰ª∂ === -->
        <q-q-apps 
            :is-open="isQQOpen" 
            :api-config="apiConfig" 
            :qq-data="qqData"
            :taobao-data="taobaoData"
            :preset-frames="presetFrames"
            :custom-frames="customFrames"
            @frame-action="handleFrameAction"
            @close="isQQOpen = false">
        </q-q-apps>

        <settings-app 
            :is-open="isSettingsOpen" 
            :api-config="apiConfig" 
            v-model:model-list="modelList"
            :saved-apis="savedApis"
            @close="isSettingsOpen = false">
        </settings-app>

        <theme-apps 
            :is-open="isBeautifyOpen"
            :state="themeState" 
            @trigger-upload="handleThemeUpload"
            @reset="resetBeautify"
            @close="isBeautifyOpen = false">
        </theme-apps>

        <typeface-app 
            :is-open="isFontOpen"
            @close="isFontOpen = false">
        </typeface-app>

        <otomegame-app 
            :is-open="isOtomegameOpen"
            :qq-data="qqData"
            :api-config="apiConfig"
            @close="isOtomegameOpen = false">
        </otomegame-app>

        <worldbook-app 
            :is-open="isWorldbookOpen"
            @close="isWorldbookOpen = false">
        </worldbook-app>

        <savedata-app 
            :is-open="isSavedataOpen"
            @close="isSavedataOpen = false">
        </savedata-app>

        <taobao-app 
            :is-open="isTaobaoOpen"
            :api-config="apiConfig"
            :taobao-data="taobaoData"
            @close="isTaobaoOpen = false">
        </taobao-app>

        <anonymousbox-app 
            :is-open="isAnonymousboxOpen"
            :qq-data="qqData"
            :api-config="apiConfig"
            @close="isAnonymousboxOpen = false">
        </anonymousbox-app>

        <checkphone-app
            :is-open="isCheckphoneOpen"
            :qq-data="qqData"
            :api-config="apiConfig"
            @close="isCheckphoneOpen = false">
        </checkphone-app>

        <story-app
            :is-open="isStoryAppOpen"
            :api-config="apiConfig"
            @close="isStoryAppOpen = false">
        </story-app>

        <!-- === ÂºπÁ™ó === -->
        <div class="modal-overlay" v-if="activeModal === 'singleEdit'" @click.self="activeModal = null">
            <div class="modal-content">
                <div class="modal-title">ÁºñËæë {{ editTargetLabel }}</div>
                <input type="text" class="modal-input" v-model="tempInputVal">
                <button class="modal-btn" style="color: #34c759;" @click="saveSingleEdit">‚úÖ ‰øùÂ≠ò</button>
                <button class="modal-btn cancel" @click="activeModal = null">ÂèñÊ∂à</button>
            </div>
        </div>

        <!-- Á∫™ÂøµÊó•ÁºñËæëÂºπÁ™ó -->
        <div class="modal-overlay" v-if="activeModal === 'daysEdit'" @click.self="activeModal = null">
            <div class="modal-content">
                <div class="modal-title">ÁºñËæëÁ∫™ÂøµÊó•</div>
                <div class="text-input-group">
                    <div class="input-label">Ê†áÈ¢ò</div>
                    <input type="text" class="modal-input" v-model="tempInputVal" placeholder="‰æãÂ¶ÇÔºöÁõ∏‰º¥">
                    <div class="input-label" style="margin-top: 10px;">Ëµ∑ÂßãÊó•Êúü</div>
                    <input type="date" class="modal-input" v-model="tempDate">
                </div>
                <button class="modal-btn" style="color: #34c759;" @click="saveDaysEdit">‚úÖ ‰øùÂ≠ò‰øÆÊîπ</button>
                <button class="modal-btn cancel" @click="activeModal = null">ÂèñÊ∂à</button>
            </div>
        </div>
        
        <!-- ÂõæÁâá/Â§¥ÂÉèÈÄöÁî®ÂºπÁ™ó (Â∑≤‰øÆÊîπÔºöÁßªÈô§Êú¨Âú∞‰∏ä‰º†) -->
        <div class="modal-overlay" v-if="activeModal === 'image'" @click.self="activeModal = null">
            <div class="modal-content">
                <div class="modal-title">Êõ¥Êç¢ÂõæÁâá</div>
                <button class="modal-btn" @click="handleLinkUpload(uploadTargetType, uploadTargetIndex)">üîó ËæìÂÖ•ÂõæÁâáÈìæÊé•</button>
                <button class="modal-btn" v-if="uploadTargetType === 'avatar'" @click="activeModal = 'frame'" style="color: #ff6b81;">üñºÔ∏è Êõ¥Êç¢Â§¥ÂÉèÊ°Ü</button>
                <button class="modal-btn cancel" @click="activeModal = null">ÂèñÊ∂à</button>
            </div>
        </div>
        
        <div class="modal-overlay" v-if="activeModal === 'frame'" @click.self="activeModal = null">
            <div class="modal-content">
                <div class="modal-title">ÈÄâÊã©Â§¥ÂÉèÊ°Ü</div>
                <div class="frame-grid">
                    <div class="frame-option-container" @click="setFrame('')"><div class="frame-preview frame-none"></div><div class="frame-label">Êó†</div></div>
                    <div class="frame-option-container" @click="addCustomFrame"><div class="frame-preview frame-add">+</div><div class="frame-label">Ëá™ÂÆö‰πâ</div></div>
                    <!-- È¢ÑËÆæÂ§¥ÂÉèÊ°Ü -->
                    <div class="frame-option-container" v-for="(frameUrl, index) in presetFrames" :key="'preset-' + index" @click="setFrame('preset-frame-' + index)">
                        <div class="frame-preview" :class="'preset-frame-' + index" :style="{ backgroundImage: 'url(' + frameUrl + ')', backgroundSize: 'cover', backgroundPosition: 'center' }"></div>
                        <div class="frame-label">È¢ÑËÆæ{{ index + 1 }}</div>
                    </div>
                    <!-- Ëá™ÂÆö‰πâÂ§¥ÂÉèÊ°Ü -->
                    <div class="frame-option-container" v-for="(frameUrl, index) in customFrames" :key="'custom-' + index">
                        <div class="frame-preview" :class="'custom-frame-' + index" :style="{ backgroundImage: 'url(' + frameUrl + ')', backgroundSize: 'cover', backgroundPosition: 'center' }" @click="setFrame('custom-frame-' + index)"></div>
                        <div class="frame-label">Ëá™ÂÆö‰πâ{{ index + 1 }}</div>
                        <button class="delete-frame-btn" @click.stop="deleteCustomFrame(index)" title="Âà†Èô§Ê≠§Â§¥ÂÉèÊ°Ü">√ó</button>
                    </div>
                </div>
                <button class="modal-btn cancel" @click="activeModal = null">ËøîÂõû</button>
            </div>
        </div>

        <!-- Â£ÅÁ∫∏ÂºπÁ™ó (Â∑≤‰øÆÊîπÔºöÁßªÈô§Êú¨Âú∞‰∏ä‰º†) -->
        <div class="modal-overlay" v-if="activeModal === 'wallpaper'" @click.self="activeModal = null">
            <div class="modal-content">
                <div class="modal-title">Êõ¥Êç¢Â£ÅÁ∫∏</div>
                <button class="modal-btn" @click="handleLinkUpload('wallpaper')">üîó ËæìÂÖ•Â£ÅÁ∫∏ÈìæÊé•</button>
                <button class="modal-btn cancel" @click="activeModal = null">ÂèñÊ∂à</button>
            </div>
        </div>

        <div class="modal-overlay" v-if="activeModal === 'textEdit'" @click.self="activeModal = null">
            <div class="modal-content">
                <div class="modal-title">ÁºñËæëÊñáÂ≠óÁªÑ‰ª∂</div>
                <div class="text-input-group">
                    <input type="text" class="modal-input" v-model="tempText.title" placeholder="Ê†áÈ¢ò">
                    <input type="text" class="modal-input" v-model="tempText.desc" placeholder="ÂÜÖÂÆπ">
                </div>
                <div class="align-control">
                    <button class="align-btn" :class="{ active: tempText.align === 'left' }" @click="tempText.align = 'left'">‚¨ÖÔ∏è Â∑¶</button>
                    <button class="align-btn" :class="{ active: tempText.align === 'center' }" @click="tempText.align = 'center'">‚¨áÔ∏è ‰∏≠</button>
                    <button class="align-btn" :class="{ active: tempText.align === 'right' }" @click="tempText.align = 'right'">‚û°Ô∏è Âè≥</button>
                </div>
                <button class="modal-btn" style="color: #34c759;" @click="saveTextEdit">‚úÖ ‰øùÂ≠ò‰øÆÊîπ</button>
                <button class="modal-btn cancel" @click="activeModal = null">ÂèñÊ∂à</button>
            </div>
        </div>
        
        <!-- ÂõæÊ†áÂºπÁ™ó (Â∑≤‰øÆÊîπÔºöÁßªÈô§Êú¨Âú∞‰∏ä‰º†) -->
        <div class="modal-overlay" v-if="activeModal === 'icon'" @click.self="activeModal = null">
            <div class="modal-content">
                <div class="modal-title">Êõ¥Êç¢ÂõæÊ†á</div>
                <button class="modal-btn" @click="handleLinkUpload('icon', uploadTargetIndex)">üîó ËæìÂÖ•ÂõæÁâáÈìæÊé•</button>
                <button class="modal-btn cancel" @click="activeModal = null">ÂèñÊ∂à</button>
            </div>
        </div>
        
        <!-- ÁßªÈô§‰∫ÜÂéüÊú¨Âú®ËøôÈáåÁöÑ <input type="file"> -->
    </div>

    <!-- ÂºïÂÖ• main.jsÔºåÊ≥®ÊÑè type="module" -->
    <script type="module" src="main.js"></script>
</body>
</html>
